@page "/authentication/{action}"
@using Microsoft.AspNetCore.Components.WebAssembly.Authentication
@using Microsoft.Extensions.Configuration

@inject NavigationManager Navigation
@inject IConfiguration Configuration

@if(identityProvider != null && identityProvider.Equals(IdentityProvider.AUTH_0))
{
    <RemoteAuthenticatorView Action="@Action">
       <LogOut>
           @{
               Navigation.NavigateTo($"{Configuration[$"{identityProvider}:Authority"]}/v2/logout?client_id={Configuration[$"{identityProvider}:ClientId"]}");
           }
       </LogOut>
    </RemoteAuthenticatorView>   
}
else
{
    <RemoteAuthenticatorView Action="@Action" />
}

@code{
    [Parameter] public string Action { get; set; }

    private string identityProvider;

    protected override void OnInitialized()
    {
        identityProvider = Configuration["IdentityProvider:DefaultProvider"];

        base.OnInitialized();
    }
}
