@using Microsoft.AspNetCore.Components.Forms

@typeparam T where T : class, new()
@inherits TableBase<T>

@if (dynamicList == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <h3>@dynamicList.Title</h3>

    <table class="table table-striped">
        <thead>
            <tr>
                @foreach(var column in dynamicList.ConfigItems)
                {
                    <th>@column.Label</th>
                }
                <th> 
                    <ComponentTip Text="Create new"><button type="button" class="btn btn-small borderless btn-outline-primary fas fa-plus" @onclick="() => Add()"/></ComponentTip>
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach(var listIitem in dynamicList.DynamicListItems)
            {
                <tr>
                    @foreach(var column in dynamicList.ConfigItems)
                    {
                        <td>
                            @dynamicList.GetValue(listIitem.Model, column.PropertyName)
                        </td>
                    }
                    <td>
                        <ComponentTip Text="Edit"><button type="button" class="btn btn-small borderless btn-outline-primary fas fa-edit" @onclick="() => Update(dynamicList.GetValue(listIitem.Model, dynamicList.Config.NavigateToProperty))"/></ComponentTip>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}